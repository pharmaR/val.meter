TODO:

- avoid using top level callback, instead use on.exit?
- improve method not found error
- 